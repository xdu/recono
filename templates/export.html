{% extends "base.html" %}

{% block content %}
<h1 class="title">Export PDF Pages</h1>

<form method="POST" action="{{ url_for('export_pdf', filename=filename) }}">
    <div class="columns is-multiline">
        {% for page in range(1, total_pages + 1) %}
        <div class="column is-one-quarter">
            <div class="card">
                <div class="card-image">
                    <figure class="image">
                        <img src="{{ url_for('static', filename='page_preview_' ~ filename ~ '_' ~ page ~ '.png') }}" alt="Page {{ page }}">
                    </figure>
                </div>
                <div class="card-content">
                    <div class="field">
                        <label class="checkbox">
                            <input type="checkbox" name="pages" value="{{ page }}" {% if page == default_page %}checked{% endif %}>
                            Page {{ page }}
                        </label>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="field is-grouped" style="margin-top: 20px;">
        <div class="control">
            <button type="submit" class="button is-primary">
                Export Selected Pages
            </button>
        </div>
    </div>
</form>

<!-- Progress bar -->
<div id="progress-container" style="margin-top: 20px; display: none;">
    <progress id="export-progress" class="progress is-primary" value="0" max="100"></progress>
    <p id="progress-text">Preparing export...</p>
</div>

<script>
// Add any necessary JavaScript here
</script>

{% endblock %}
