{% extends "base.html" %}
{% block content %}
  <section class="section">
    <div class="container">
      <h1 class="title">Upload PDF</h1>
      <!-- Form in a column -->
      <form method="POST" action="{{ url_for('upload') }}" enctype="multipart/form-data">
        <div class="field">
          <div class="control">
            <input class="input" type="file" name="file">
          </div>
        </div>
        <div class="field">
          <div class="control">
            <button class="button is-primary" type="submit">Upload</button>
          </div>
        </div>
      </form>
      <!-- File list -->
      <h2 class="title">Uploaded Files</h2>
      <div class="content">
          <ul>
            {% for filename in uploaded_files %}
              <li>
                <a href="{{ url_for('view_text', filename=filename, start=1) }}">{{ filename }}</a>
                <form method="POST" action="{{ url_for('delete_file', filename=filename) }}" style="display: inline; margin-left: 10px;" onsubmit="return confirmDelete('{{ filename }}')">
                  <button type="submit" class="button is-danger is-small">Delete</button>
                </form>
              </li>
            {% endfor %}
          </ul>
      </div>
      
      <script>
      function confirmDelete(filename) {
          return confirm(`Are you sure you want to delete "${filename}"? This will remove the PDF file and all extracted page images, but the extracted text will be preserved in the database.`);
      }
      </script>
    </div>
  </section>
{% endblock %}
